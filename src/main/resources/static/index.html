<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tikkl Bank API í…ŒìŠ¤íŠ¸</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; padding: 20px; }
        h1 { text-align: center; color: #333; margin-bottom: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .section { background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .section h2 { color: #2196F3; margin-bottom: 15px; border-bottom: 2px solid #2196F3; padding-bottom: 10px; }
        .api-group { margin-bottom: 20px; padding: 15px; background: #fafafa; border-radius: 8px; }
        .api-group h3 { color: #666; margin-bottom: 10px; }
        .api-item { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; flex-wrap: wrap; }
        .method { padding: 5px 10px; border-radius: 4px; font-weight: bold; min-width: 60px; text-align: center; font-size: 12px; }
        .get { background: #61affe; color: white; }
        .post { background: #49cc90; color: white; }
        .put { background: #fca130; color: white; }
        .delete { background: #f93e3e; color: white; }
        input, textarea, select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        input[type="text"], input[type="number"], input[type="password"], input[type="date"] { width: 150px; }
        select { width: 150px; }
        textarea { width: 300px; height: 80px; }
        button { padding: 8px 15px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 2px; }
        button:hover { background: #1976D2; }
        .response { background: #f8f8f8; border: 1px solid #ddd; border-radius: 4px; padding: 15px; margin-top: 10px; white-space: pre-wrap; font-family: monospace; max-height: 300px; overflow-y: auto; font-size: 12px; }
        label { font-weight: bold; min-width: 100px; display: inline-block; }
        .form-row { display: flex; gap: 10px; margin-bottom: 8px; align-items: center; flex-wrap: wrap; }
        .hidden { display: none; }
        .tabs { display: flex; gap: 5px; margin-bottom: 15px; flex-wrap: wrap; }
        .tab { padding: 10px 15px; background: #e0e0e0; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .tab.active { background: #2196F3; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 4px; margin-bottom: 15px; }
        .dashboard-card { display: inline-block; background: #f0f8ff; padding: 15px; border-radius: 8px; margin: 5px; min-width: 200px; }
        .dashboard-card h4 { color: #1976D2; margin-bottom: 5px; }
        .dashboard-card .value { font-size: 24px; font-weight: bold; color: #333; }
        .success { color: #4caf50; }
        .error { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¦ Tikkl Bank API í…ŒìŠ¤íŠ¸</h1>
        
        <div class="info">
            <strong>ì°¸ê³ :</strong> API í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë¨¼ì € íšŒì›ê°€ì… í›„ ë¡œê·¸ì¸í•˜ì—¬ memberIdë¥¼ í™•ì¸í•˜ì„¸ìš”.<br>
            í˜„ì¬ memberId: <span id="currentMemberId" style="font-weight:bold; color:#1976D2;">ì—†ìŒ</span>
            <span id="currentSavingsId" style="margin-left:20px;">ì €ì¶•ê³„ì¢Œ ID: ì—†ìŒ</span>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('auth')">ì¸ì¦</div>
            <div class="tab" onclick="showTab('dashboard')">ëŒ€ì‹œë³´ë“œ</div>
            <div class="tab" onclick="showTab('account')">ê³„ì¢Œ</div>
            <div class="tab" onclick="showTab('card')">ì¹´ë“œ</div>
            <div class="tab" onclick="showTab('payment')">ê²°ì œ/ì €ì¶•</div>
            <div class="tab" onclick="showTab('benefit')">ì¹´ë“œí˜œíƒ</div>
            <div class="tab" onclick="showTab('billing')">ì²­êµ¬ë‚´ì—­</div>
            <div class="tab" onclick="showTab('transaction')">ê±°ë˜ë‚´ì—­</div>
            <div class="tab" onclick="showTab('product')">ê¸ˆìœµìƒí’ˆ</div>
        </div>

        <!-- ì¸ì¦ API -->
        <div id="auth" class="tab-content active">
            <div class="section">
                <h2>ğŸ” ì¸ì¦ API</h2>
                
                <div class="api-group">
                    <h3>íšŒì›ê°€ì…</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/auth/signup</span></div>
                    <div class="form-row"><label>ì•„ì´ë””:</label><input type="text" id="signup-loginId" placeholder="ì•„ì´ë””"></div>
                    <div class="form-row"><label>ë¹„ë°€ë²ˆí˜¸:</label><input type="password" id="signup-password" placeholder="ë¹„ë°€ë²ˆí˜¸"></div>
                    <div class="form-row"><label>ì´ë¦„:</label><input type="text" id="signup-name" placeholder="ì´ë¦„"></div>
                    <div class="form-row"><label>ìƒë…„ì›”ì¼:</label><input type="date" id="signup-birthDate"></div>
                    <div class="form-row"><label>ì „í™”ë²ˆí˜¸:</label><input type="text" id="signup-phoneNumber" placeholder="010-1234-5678"></div>
                    <button onclick="signup()">íšŒì›ê°€ì…</button>
                    <div id="signup-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ë¡œê·¸ì¸</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/auth/login</span></div>
                    <div class="form-row"><label>ì•„ì´ë””:</label><input type="text" id="login-loginId" placeholder="ì•„ì´ë””"></div>
                    <div class="form-row"><label>ë¹„ë°€ë²ˆí˜¸:</label><input type="password" id="login-password" placeholder="ë¹„ë°€ë²ˆí˜¸"></div>
                    <button onclick="login()">ë¡œê·¸ì¸</button>
                    <div id="login-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ëŒ€ì‹œë³´ë“œ -->
        <div id="dashboard" class="tab-content">
            <div class="section">
                <h2>ğŸ“Š ëŒ€ì‹œë³´ë“œ</h2>
                <div class="api-group">
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/dashboard</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="dashboard-memberId" placeholder="íšŒì› ID"></div>
                    <button onclick="getDashboard()">ëŒ€ì‹œë³´ë“œ ì¡°íšŒ</button>
                    <div id="dashboard-cards" style="margin-top:15px;"></div>
                    <div id="dashboard-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê³„ì¢Œ API -->
        <div id="account" class="tab-content">
            <div class="section">
                <h2>ğŸ§ ê³„ì¢Œ API</h2>
                
                <div class="api-group">
                    <h3>ê³„ì¢Œ ëª©ë¡ ì¡°íšŒ</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/accounts</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="accounts-memberId" placeholder="íšŒì› ID">
                    <button onclick="getAccounts()">ì¡°íšŒ</button></div>
                    <div id="accounts-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ê³„ì¢Œ ë“±ë¡</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/accounts</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="account-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ê³„ì¢Œë²ˆí˜¸:</label><input type="text" id="account-number" placeholder="123-456-789"></div>
                    <div class="form-row"><label>ì€í–‰ëª…:</label><input type="text" id="account-bankName" placeholder="êµ­ë¯¼ì€í–‰"></div>
                    <div class="form-row"><label>ì£¼ê³„ì¢Œ:</label><select id="account-isPrimary"><option value="false">ì•„ë‹ˆì˜¤</option><option value="true">ì˜ˆ</option></select></div>
                    <button onclick="registerAccount()">ë“±ë¡</button>
                    <div id="account-register-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì…ê¸ˆ</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/accounts/{accountId}/deposit</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="deposit-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ê³„ì¢Œ ID:</label><input type="number" id="deposit-accountId" placeholder="ê³„ì¢Œ ID"></div>
                    <div class="form-row"><label>ì…ê¸ˆì•¡:</label><input type="number" id="deposit-amount" placeholder="ê¸ˆì•¡"></div>
                    <div class="form-row"><label>ì„¤ëª…:</label><input type="text" id="deposit-description" placeholder="ê¸‰ì—¬ ì…ê¸ˆ"></div>
                    <button onclick="deposit()">ì…ê¸ˆ</button>
                    <div id="deposit-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì¶œê¸ˆ</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/accounts/{accountId}/withdraw</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="withdraw-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ê³„ì¢Œ ID:</label><input type="number" id="withdraw-accountId" placeholder="ê³„ì¢Œ ID"></div>
                    <div class="form-row"><label>ì¶œê¸ˆì•¡:</label><input type="number" id="withdraw-amount" placeholder="ê¸ˆì•¡"></div>
                    <div class="form-row"><label>ì„¤ëª…:</label><input type="text" id="withdraw-description" placeholder="ATM ì¶œê¸ˆ"></div>
                    <button onclick="withdraw()">ì¶œê¸ˆ</button>
                    <div id="withdraw-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ì¹´ë“œ API -->
        <div id="card" class="tab-content">
            <div class="section">
                <h2>ğŸ’³ ì¹´ë“œ API</h2>
                
                <div class="api-group">
                    <h3>ì¹´ë“œ ëª©ë¡ ì¡°íšŒ</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/cards</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="cards-memberId" placeholder="íšŒì› ID">
                    <button onclick="getCards()">ì¡°íšŒ</button></div>
                    <div id="cards-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì¹´ë“œ ë“±ë¡ (ì›” ì‚¬ìš© ëª©í‘œ ì„¤ì •)</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/cards</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="card-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œë²ˆí˜¸:</label><input type="text" id="card-number" placeholder="1234-5678-9012-3456"></div>
                    <div class="form-row"><label>ì¹´ë“œëª…:</label><input type="text" id="card-name" placeholder="ì‹ í•œì¹´ë“œ Deep Dream"></div>
                    <div class="form-row"><label>ì¹´ë“œì‚¬:</label><input type="text" id="card-company" placeholder="ì‹ í•œì¹´ë“œ"></div>
                    <div class="form-row"><label>ì¹´ë“œìœ í˜•:</label><select id="card-type"><option value="CREDIT">ì‹ ìš©ì¹´ë“œ</option><option value="DEBIT">ì²´í¬ì¹´ë“œ</option></select></div>
                    <div class="form-row"><label>ìœ íš¨ê¸°ê°„:</label><input type="date" id="card-expiry"></div>
                    <div class="form-row"><label>ë³´ë„ˆìŠ¤ ì €ì¶•(%):</label><input type="number" id="card-bonus" placeholder="0" step="0.1"></div>
                    <div class="form-row"><label>ì›” ëª©í‘œ ì‚¬ìš©ì•¡:</label><input type="number" id="card-target" placeholder="500000"></div>
                    <div class="form-row"><label>í˜œíƒ ì •ë³´:</label><input type="text" id="card-benefits" placeholder="ì¹´í˜ 30% í• ì¸"></div>
                    <button onclick="registerCard()">ë“±ë¡</button>
                    <div id="card-register-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì¹´ë“œ ìƒì„¸ ì¡°íšŒ (í˜œíƒ/ì²­êµ¬/ë‹¬ì„±ë¥ )</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/cards/{cardId}/detail</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="card-detail-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œ ID:</label><input type="number" id="card-detail-cardId" placeholder="ì¹´ë“œ ID"></div>
                    <button onclick="getCardDetail()">ìƒì„¸ ì¡°íšŒ</button>
                    <div id="card-detail-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì €ì¶• ê³„ì¢Œ ì—°ê²°</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/cards/{cardId}/link-savings</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="link-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œ ID:</label><input type="number" id="link-cardId" placeholder="ì¹´ë“œ ID"></div>
                    <div class="form-row"><label>ì €ì¶•ê³„ì¢Œ ID:</label><input type="number" id="link-savingsId" placeholder="ì €ì¶•ê³„ì¢Œ ID"></div>
                    <div class="form-row"><label>ì›” ëª©í‘œ:</label><input type="number" id="link-target" placeholder="500000"></div>
                    <button onclick="linkSavingsAccount()">ì—°ê²°</button>
                    <div id="link-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê²°ì œ/ì €ì¶• API -->
        <div id="payment" class="tab-content">
            <div class="section">
                <h2>ğŸ’° ê²°ì œ ë° ìë™ ì €ì¶•</h2>
                
                <div class="api-group">
                    <h3>ì¹´ë“œ ê²°ì œ (ìë™ ì €ì¶•)</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/cards/{cardId}/payment</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="payment-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œ ID:</label><input type="number" id="payment-cardId" placeholder="ì¹´ë“œ ID"></div>
                    <div class="form-row"><label>ê²°ì œ ê¸ˆì•¡:</label><input type="number" id="payment-amount" placeholder="50000"></div>
                    <div class="form-row"><label>ê°€ë§¹ì :</label><input type="text" id="payment-merchant" placeholder="ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì "></div>
                    <div class="form-row"><label>ì¹´í…Œê³ ë¦¬:</label>
                        <select id="payment-category">
                            <option value="ì‹ë¹„">ì‹ë¹„</option>
                            <option value="êµí†µ">êµí†µ</option>
                            <option value="ì‡¼í•‘">ì‡¼í•‘</option>
                            <option value="ë¬¸í™”">ë¬¸í™”</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="form-row"><label>ì„¤ëª…:</label><input type="text" id="payment-description" placeholder="ì»¤í”¼ êµ¬ë§¤"></div>
                    <button onclick="processPayment()">ê²°ì œ</button>
                    <div id="payment-result" style="margin-top:10px;"></div>
                    <div id="payment-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì €ì¶• ê³„ì¢Œ ì¡°íšŒ</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/savings</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="savings-memberId" placeholder="íšŒì› ID">
                    <button onclick="getSavingsAccount()">ì¡°íšŒ</button></div>
                    <div id="savings-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ì¹´ë“œ í˜œíƒ API -->
        <div id="benefit" class="tab-content">
            <div class="section">
                <h2>ğŸ ì¹´ë“œ í˜œíƒ</h2>
                
                <div class="api-group">
                    <h3>í˜œíƒ ëª©ë¡ ì¡°íšŒ</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/cards/{cardId}/benefits</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="benefits-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œ ID:</label><input type="number" id="benefits-cardId" placeholder="ì¹´ë“œ ID"></div>
                    <button onclick="getBenefits()">ì¡°íšŒ</button>
                    <div id="benefits-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>í˜œíƒ ì¶”ê°€</h3>
                    <div class="api-item"><span class="method post">POST</span><span>/api/members/{memberId}/cards/{cardId}/benefits</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="benefit-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œ ID:</label><input type="number" id="benefit-cardId" placeholder="ì¹´ë“œ ID"></div>
                    <div class="form-row"><label>í˜œíƒëª…:</label><input type="text" id="benefit-name" placeholder="ì¹´í˜ í• ì¸"></div>
                    <div class="form-row"><label>ì„¤ëª…:</label><input type="text" id="benefit-description" placeholder="ìŠ¤íƒ€ë²…ìŠ¤ 30% í• ì¸"></div>
                    <div class="form-row"><label>í˜œíƒìœ í˜•:</label>
                        <select id="benefit-type">
                            <option value="DISCOUNT">í• ì¸</option>
                            <option value="CASHBACK">ìºì‹œë°±</option>
                            <option value="POINT">í¬ì¸íŠ¸</option>
                            <option value="MILEAGE">ë§ˆì¼ë¦¬ì§€</option>
                        </select>
                    </div>
                    <div class="form-row"><label>í• ì¸ìœ¨(%):</label><input type="number" id="benefit-rate" placeholder="30" step="0.1"></div>
                    <div class="form-row"><label>ìµœëŒ€í• ì¸ì•¡:</label><input type="number" id="benefit-max" placeholder="5000"></div>
                    <div class="form-row"><label>ëª©í‘œê¸ˆì•¡:</label><input type="number" id="benefit-target" placeholder="300000"></div>
                    <div class="form-row"><label>ì¹´í…Œê³ ë¦¬:</label><input type="text" id="benefit-category" placeholder="ì‹ë¹„"></div>
                    <button onclick="addBenefit()">ì¶”ê°€</button>
                    <div id="benefit-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ì²­êµ¬ ë‚´ì—­ API -->
        <div id="billing" class="tab-content">
            <div class="section">
                <h2>ğŸ“ƒ ì²­êµ¬ ë‚´ì—­</h2>
                
                <div class="api-group">
                    <h3>ì²­êµ¬ ë‚´ì—­ ì¡°íšŒ</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/cards/{cardId}/billings</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="billing-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ì¹´ë“œ ID:</label><input type="number" id="billing-cardId" placeholder="ì¹´ë“œ ID"></div>
                    <button onclick="getBillings()">ì¡°íšŒ</button>
                    <div id="billing-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê±°ë˜ë‚´ì—­ API -->
        <div id="transaction" class="tab-content">
            <div class="section">
                <h2>ğŸ“‹ ê±°ë˜ë‚´ì—­ API</h2>
                
                <div class="api-group">
                    <h3>ìµœê·¼ ê±°ë˜ ë‚´ì—­</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/transactions/recent</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="recent-tx-memberId" placeholder="íšŒì› ID">
                    <button onclick="getRecentTransactions()">ì¡°íšŒ</button></div>
                    <div id="recent-tx-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ê±°ë˜ ë‚´ì—­ ê²€ìƒ‰</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/members/{memberId}/transactions</span></div>
                    <div class="form-row"><label>íšŒì› ID:</label><input type="number" id="tx-memberId" placeholder="íšŒì› ID"></div>
                    <div class="form-row"><label>ê±°ë˜ìœ í˜•:</label>
                        <select id="tx-type">
                            <option value="">ì „ì²´</option>
                            <option value="DEPOSIT">ì…ê¸ˆ</option>
                            <option value="WITHDRAWAL">ì¶œê¸ˆ</option>
                            <option value="TRANSFER">ì´ì²´</option>
                            <option value="PAYMENT">ê²°ì œ</option>
                            <option value="SAVINGS">ì €ì¶•</option>
                            <option value="INTEREST">ì´ì</option>
                        </select>
                    </div>
                    <div class="form-row"><label>ê²€ìƒ‰ì–´:</label><input type="text" id="tx-keyword" placeholder="ê²€ìƒ‰ì–´"></div>
                    <button onclick="searchTransactions()">ê²€ìƒ‰</button>
                    <div id="tx-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê¸ˆìœµìƒí’ˆ API -->
        <div id="product" class="tab-content">
            <div class="section">
                <h2>ğŸ“Š ê¸ˆìœµìƒí’ˆ API</h2>
                
                <div class="api-group">
                    <h3>ì „ì²´ ìƒí’ˆ ëª©ë¡</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/products</span>
                    <button onclick="getAllProducts()">ì¡°íšŒ</button></div>
                    <div id="products-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ìœ í˜•ë³„ ìƒí’ˆ ì¡°íšŒ</h3>
                    <div class="api-item"><span class="method get">GET</span><span>/api/products/type/{productType}</span></div>
                    <div class="form-row"><label>ìƒí’ˆìœ í˜•:</label>
                        <select id="product-type">
                            <option value="SAVINGS">ì ê¸ˆ</option>
                            <option value="DEPOSIT">ì˜ˆê¸ˆ</option>
                            <option value="FUND">í€ë“œ</option>
                            <option value="INSURANCE">ë³´í—˜</option>
                        </select>
                        <button onclick="getProductsByType()">ì¡°íšŒ</button>
                    </div>
                    <div id="products-type-response" class="response hidden"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentMemberId = null;
        let currentSavingsId = null;

        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        function showResponse(elementId, data, success = true) {
            const el = document.getElementById(elementId);
            el.classList.remove('hidden');
            el.textContent = JSON.stringify(data, null, 2);
            el.style.borderColor = success ? '#4caf50' : '#f44336';
        }

        async function apiCall(url, method = 'GET', body = null) {
            const options = { method, headers: { 'Content-Type': 'application/json' } };
            if (body) options.body = JSON.stringify(body);
            try {
                const response = await fetch(url, options);
                const data = await response.json();
                return { success: response.ok, data };
            } catch (error) {
                return { success: false, data: { error: error.message } };
            }
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('ko-KR').format(amount) + 'ì›';
        }

        // Auth
        async function signup() {
            const body = {
                loginId: document.getElementById('signup-loginId').value,
                password: document.getElementById('signup-password').value,
                name: document.getElementById('signup-name').value,
                birthDate: document.getElementById('signup-birthDate').value,
                phoneNumber: document.getElementById('signup-phoneNumber').value
            };
            const result = await apiCall('/api/auth/signup', 'POST', body);
            showResponse('signup-response', result.data, result.success);
            if (result.success && result.data.data) {
                currentMemberId = result.data.data.id;
                document.getElementById('currentMemberId').textContent = currentMemberId;
                // ì €ì¶• ê³„ì¢Œ ì¡°íšŒ
                const savingsResult = await apiCall(`/api/members/${currentMemberId}/savings`);
                if (savingsResult.success && savingsResult.data.data) {
                    currentSavingsId = savingsResult.data.data.id;
                    document.getElementById('currentSavingsId').textContent = 'ì €ì¶•ê³„ì¢Œ ID: ' + currentSavingsId;
                }
            }
        }

        async function login() {
            const body = {
                loginId: document.getElementById('login-loginId').value,
                password: document.getElementById('login-password').value
            };
            const result = await apiCall('/api/auth/login', 'POST', body);
            showResponse('login-response', result.data, result.success);
            if (result.success && result.data.data) {
                currentMemberId = result.data.data.id;
                document.getElementById('currentMemberId').textContent = currentMemberId;
                const savingsResult = await apiCall(`/api/members/${currentMemberId}/savings`);
                if (savingsResult.success && savingsResult.data.data) {
                    currentSavingsId = savingsResult.data.data.id;
                    document.getElementById('currentSavingsId').textContent = 'ì €ì¶•ê³„ì¢Œ ID: ' + currentSavingsId;
                }
            }
        }

        // Dashboard
        async function getDashboard() {
            const id = document.getElementById('dashboard-memberId').value;
            const result = await apiCall(`/api/members/${id}/dashboard`);
            showResponse('dashboard-response', result.data, result.success);
            if (result.success && result.data.data) {
                const d = result.data.data;
                document.getElementById('dashboard-cards').innerHTML = `
                    <div class="dashboard-card"><h4>ğŸ’° ì´ ì €ì¶• ì”ì•¡</h4><div class="value">${formatCurrency(d.totalSavingsBalance)}</div></div>
                    <div class="dashboard-card"><h4>ğŸ“ˆ ëˆ„ì  ì´ì</h4><div class="value">${formatCurrency(d.totalInterestEarned)}</div></div>
                    <div class="dashboard-card"><h4>ğŸ“… ì˜ˆìƒ ì›” ì´ì</h4><div class="value">${formatCurrency(d.expectedMonthlyInterest)}</div></div>
                    <div class="dashboard-card"><h4>â° ë§Œê¸°ê¹Œì§€</h4><div class="value">${d.remainingDays}ì¼</div></div>
                    <div class="dashboard-card"><h4>ğŸ’³ ì´ë²ˆë‹¬ ì¹´ë“œ ì‚¬ìš©</h4><div class="value">${formatCurrency(d.totalCardSpendingThisMonth)}</div></div>
                    <div class="dashboard-card"><h4>ğŸ ì´ë²ˆë‹¬ í˜œíƒ</h4><div class="value">${formatCurrency(d.totalBenefitThisMonth)}</div></div>
                    <div class="dashboard-card"><h4>ğŸ“ƒ ë‹¤ìŒë‹¬ ì²­êµ¬</h4><div class="value">${formatCurrency(d.nextMonthBilling)}</div></div>
                    <div class="dashboard-card"><h4>ğŸ§ ì´ ê³„ì¢Œ ì”ì•¡</h4><div class="value">${formatCurrency(d.totalAccountBalance)}</div></div>
                `;
            }
        }

        // Accounts
        async function getAccounts() {
            const id = document.getElementById('accounts-memberId').value;
            const result = await apiCall(`/api/members/${id}/accounts`);
            showResponse('accounts-response', result.data, result.success);
        }

        async function registerAccount() {
            const id = document.getElementById('account-memberId').value;
            const body = {
                accountNumber: document.getElementById('account-number').value,
                bankName: document.getElementById('account-bankName').value,
                isPrimary: document.getElementById('account-isPrimary').value === 'true'
            };
            const result = await apiCall(`/api/members/${id}/accounts`, 'POST', body);
            showResponse('account-register-response', result.data, result.success);
        }

        async function deposit() {
            const memberId = document.getElementById('deposit-memberId').value;
            const accountId = document.getElementById('deposit-accountId').value;
            const body = {
                amount: parseFloat(document.getElementById('deposit-amount').value),
                description: document.getElementById('deposit-description').value
            };
            const result = await apiCall(`/api/members/${memberId}/accounts/${accountId}/deposit`, 'POST', body);
            showResponse('deposit-response', result.data, result.success);
        }

        async function withdraw() {
            const memberId = document.getElementById('withdraw-memberId').value;
            const accountId = document.getElementById('withdraw-accountId').value;
            const body = {
                amount: parseFloat(document.getElementById('withdraw-amount').value),
                description: document.getElementById('withdraw-description').value
            };
            const result = await apiCall(`/api/members/${memberId}/accounts/${accountId}/withdraw`, 'POST', body);
            showResponse('withdraw-response', result.data, result.success);
        }

        // Cards
        async function getCards() {
            const id = document.getElementById('cards-memberId').value;
            const result = await apiCall(`/api/members/${id}/cards`);
            showResponse('cards-response', result.data, result.success);
        }

        async function registerCard() {
            const id = document.getElementById('card-memberId').value;
            const body = {
                cardNumber: document.getElementById('card-number').value,
                cardName: document.getElementById('card-name').value,
                cardCompany: document.getElementById('card-company').value,
                cardType: document.getElementById('card-type').value,
                expiryDate: document.getElementById('card-expiry').value,
                bonusSavingsRatio: parseFloat(document.getElementById('card-bonus').value) || 0,
                monthlySpendingTarget: parseFloat(document.getElementById('card-target').value) || 0,
                benefits: document.getElementById('card-benefits').value
            };
            const result = await apiCall(`/api/members/${id}/cards`, 'POST', body);
            showResponse('card-register-response', result.data, result.success);
        }

        async function getCardDetail() {
            const memberId = document.getElementById('card-detail-memberId').value;
            const cardId = document.getElementById('card-detail-cardId').value;
            const result = await apiCall(`/api/members/${memberId}/cards/${cardId}/detail`);
            showResponse('card-detail-response', result.data, result.success);
        }

        async function linkSavingsAccount() {
            const memberId = document.getElementById('link-memberId').value;
            const cardId = document.getElementById('link-cardId').value;
            const body = {
                savingsAccountId: parseInt(document.getElementById('link-savingsId').value),
                monthlySpendingTarget: parseFloat(document.getElementById('link-target').value) || 0
            };
            const result = await apiCall(`/api/members/${memberId}/cards/${cardId}/link-savings`, 'POST', body);
            showResponse('link-response', result.data, result.success);
        }

        // Payment
        async function processPayment() {
            const memberId = document.getElementById('payment-memberId').value;
            const cardId = document.getElementById('payment-cardId').value;
            const body = {
                amount: parseFloat(document.getElementById('payment-amount').value),
                merchant: document.getElementById('payment-merchant').value,
                category: document.getElementById('payment-category').value,
                description: document.getElementById('payment-description').value
            };
            const result = await apiCall(`/api/members/${memberId}/cards/${cardId}/payment`, 'POST', body);
            showResponse('payment-response', result.data, result.success);
            if (result.success && result.data.data) {
                const d = result.data.data;
                document.getElementById('payment-result').innerHTML = `
                    <div style="padding:10px; background:#e8f5e9; border-radius:4px;">
                        <strong>âœ… ê²°ì œ ì™„ë£Œ!</strong><br>
                        ê²°ì œê¸ˆì•¡: ${formatCurrency(d.paymentAmount)}<br>
                        ìë™ì €ì¶•: <span class="success">${formatCurrency(d.savingsAmount)}</span><br>
                        ë°›ì€í˜œíƒ: <span class="success">${formatCurrency(d.benefitAmount)}</span><br>
                        ì´ë²ˆë‹¬ ì¹´ë“œì‚¬ìš©: ${formatCurrency(d.cardMonthlyTotal)}<br>
                        ë‹¤ìŒë‹¬ ì²­êµ¬ì˜ˆì •: ${formatCurrency(d.nextBillingAmount)}
                    </div>
                `;
            }
        }

        async function getSavingsAccount() {
            const id = document.getElementById('savings-memberId').value;
            const result = await apiCall(`/api/members/${id}/savings`);
            showResponse('savings-response', result.data, result.success);
        }

        // Benefits
        async function getBenefits() {
            const memberId = document.getElementById('benefits-memberId').value;
            const cardId = document.getElementById('benefits-cardId').value;
            const result = await apiCall(`/api/members/${memberId}/cards/${cardId}/benefits`);
            showResponse('benefits-response', result.data, result.success);
        }

        async function addBenefit() {
            const memberId = document.getElementById('benefit-memberId').value;
            const cardId = document.getElementById('benefit-cardId').value;
            const body = {
                benefitName: document.getElementById('benefit-name').value,
                benefitDescription: document.getElementById('benefit-description').value,
                benefitType: document.getElementById('benefit-type').value,
                discountRate: parseFloat(document.getElementById('benefit-rate').value),
                maxDiscount: parseFloat(document.getElementById('benefit-max').value) || null,
                targetAmount: parseFloat(document.getElementById('benefit-target').value) || 0,
                category: document.getElementById('benefit-category').value
            };
            const result = await apiCall(`/api/members/${memberId}/cards/${cardId}/benefits`, 'POST', body);
            showResponse('benefit-response', result.data, result.success);
        }

        // Billings
        async function getBillings() {
            const memberId = document.getElementById('billing-memberId').value;
            const cardId = document.getElementById('billing-cardId').value;
            const result = await apiCall(`/api/members/${memberId}/cards/${cardId}/billings`);
            showResponse('billing-response', result.data, result.success);
        }

        // Transactions
        async function getRecentTransactions() {
            const id = document.getElementById('recent-tx-memberId').value;
            const result = await apiCall(`/api/members/${id}/transactions/recent`);
            showResponse('recent-tx-response', result.data, result.success);
        }

        async function searchTransactions() {
            const id = document.getElementById('tx-memberId').value;
            const type = document.getElementById('tx-type').value;
            const keyword = document.getElementById('tx-keyword').value;
            let url = `/api/members/${id}/transactions?`;
            if (type) url += `transactionType=${type}&`;
            if (keyword) url += `keyword=${keyword}&`;
            const result = await apiCall(url);
            showResponse('tx-response', result.data, result.success);
        }

        // Products
        async function getAllProducts() {
            const result = await apiCall('/api/products');
            showResponse('products-response', result.data, result.success);
        }

        async function getProductsByType() {
            const type = document.getElementById('product-type').value;
            const result = await apiCall(`/api/products/type/${type}`);
            showResponse('products-type-response', result.data, result.success);
        }
    </script>
</body>
</html>
