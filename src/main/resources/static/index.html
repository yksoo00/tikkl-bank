<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tikkl Bank API í…ŒìŠ¤íŠ¸</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; padding: 20px; }
        h1 { text-align: center; color: #333; margin-bottom: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .section { background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .section h2 { color: #2196F3; margin-bottom: 15px; border-bottom: 2px solid #2196F3; padding-bottom: 10px; }
        .api-group { margin-bottom: 15px; }
        .api-group h3 { color: #666; margin-bottom: 10px; }
        .api-item { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; flex-wrap: wrap; }
        .method { padding: 5px 10px; border-radius: 4px; font-weight: bold; min-width: 60px; text-align: center; }
        .get { background: #61affe; color: white; }
        .post { background: #49cc90; color: white; }
        .put { background: #fca130; color: white; }
        .delete { background: #f93e3e; color: white; }
        input, textarea { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        input[type="text"], input[type="number"], input[type="password"], input[type="date"] { width: 150px; }
        textarea { width: 300px; height: 80px; }
        button { padding: 8px 15px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #1976D2; }
        .response { background: #f8f8f8; border: 1px solid #ddd; border-radius: 4px; padding: 15px; margin-top: 10px; white-space: pre-wrap; font-family: monospace; max-height: 300px; overflow-y: auto; }
        .status { padding: 5px 10px; border-radius: 4px; margin-left: 10px; }
        .status-success { background: #4caf50; color: white; }
        .status-error { background: #f44336; color: white; }
        label { font-weight: bold; min-width: 80px; }
        .form-row { display: flex; gap: 10px; margin-bottom: 5px; align-items: center; }
        .hidden { display: none; }
        .tabs { display: flex; gap: 10px; margin-bottom: 15px; }
        .tab { padding: 10px 20px; background: #e0e0e0; border-radius: 4px; cursor: pointer; }
        .tab.active { background: #2196F3; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .info { background: #e3f2fd; padding: 10px; border-radius: 4px; margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¦ Tikkl Bank API í…ŒìŠ¤íŠ¸</h1>
        
        <div class="info">
            <strong>ì°¸ê³ :</strong> API í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë¨¼ì € íšŒì›ê°€ì… í›„ ë¡œê·¸ì¸í•˜ì—¬ memberIdë¥¼ í™•ì¸í•˜ì„¸ìš”.
            í˜„ì¬ memberId: <span id="currentMemberId">ì—†ìŒ</span>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('auth')">ì¸ì¦</div>
            <div class="tab" onclick="showTab('member')">íšŒì›/ë§ˆì´í˜ì´ì§€</div>
            <div class="tab" onclick="showTab('account')">ê³„ì¢Œ</div>
            <div class="tab" onclick="showTab('card')">ì¹´ë“œ</div>
            <div class="tab" onclick="showTab('transaction')">ê±°ë˜ë‚´ì—­</div>
            <div class="tab" onclick="showTab('product')">ê¸ˆìœµìƒí’ˆ</div>
        </div>

        <!-- ì¸ì¦ API -->
        <div id="auth" class="tab-content active">
            <div class="section">
                <h2>ğŸ” ì¸ì¦ API</h2>
                
                <div class="api-group">
                    <h3>íšŒì›ê°€ì…</h3>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span>/api/auth/signup</span>
                    </div>
                    <div class="form-row">
                        <label>ì•„ì´ë””:</label>
                        <input type="text" id="signup-loginId" placeholder="ì•„ì´ë””">
                    </div>
                    <div class="form-row">
                        <label>ë¹„ë°€ë²ˆí˜¸:</label>
                        <input type="password" id="signup-password" placeholder="ë¹„ë°€ë²ˆí˜¸">
                    </div>
                    <div class="form-row">
                        <label>ì´ë¦„:</label>
                        <input type="text" id="signup-name" placeholder="ì´ë¦„">
                    </div>
                    <div class="form-row">
                        <label>ìƒë…„ì›”ì¼:</label>
                        <input type="date" id="signup-birthDate">
                    </div>
                    <div class="form-row">
                        <label>ì „í™”ë²ˆí˜¸:</label>
                        <input type="text" id="signup-phoneNumber" placeholder="010-1234-5678">
                    </div>
                    <button onclick="signup()">íšŒì›ê°€ì…</button>
                    <div id="signup-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ë¡œê·¸ì¸</h3>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span>/api/auth/login</span>
                    </div>
                    <div class="form-row">
                        <label>ì•„ì´ë””:</label>
                        <input type="text" id="login-loginId" placeholder="ì•„ì´ë””">
                    </div>
                    <div class="form-row">
                        <label>ë¹„ë°€ë²ˆí˜¸:</label>
                        <input type="password" id="login-password" placeholder="ë¹„ë°€ë²ˆí˜¸">
                    </div>
                    <button onclick="login()">ë¡œê·¸ì¸</button>
                    <div id="login-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- íšŒì›/ë§ˆì´í˜ì´ì§€ API -->
        <div id="member" class="tab-content">
            <div class="section">
                <h2>ğŸ‘¤ íšŒì›/ë§ˆì´í˜ì´ì§€ API</h2>
                
                <div class="api-group">
                    <h3>íšŒì› ì •ë³´ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}</span>
                        <input type="number" id="member-id" placeholder="íšŒì› ID">
                        <button onclick="getMember()">ì¡°íšŒ</button>
                    </div>
                    <div id="member-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>í™ˆ ë°ì´í„° ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/home</span>
                        <input type="number" id="home-id" placeholder="íšŒì› ID">
                        <button onclick="getHome()">ì¡°íšŒ</button>
                    </div>
                    <div id="home-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ë§ˆì´í˜ì´ì§€ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/mypage</span>
                        <input type="number" id="mypage-id" placeholder="íšŒì› ID">
                        <button onclick="getMyPage()">ì¡°íšŒ</button>
                    </div>
                    <div id="mypage-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì €ì¶• ì„¤ì • ë³€ê²½</h3>
                    <div class="api-item">
                        <span class="method put">PUT</span>
                        <span>/api/members/{memberId}/savings-settings</span>
                    </div>
                    <div class="form-row">
                        <label>íšŒì› ID:</label>
                        <input type="number" id="savings-memberId" placeholder="íšŒì› ID">
                    </div>
                    <div class="form-row">
                        <label>ì €ì¶• ë¹„ìœ¨(%):</label>
                        <input type="number" id="savings-ratio" placeholder="10" step="0.1">
                    </div>
                    <div class="form-row">
                        <label>ìë™ ì €ì¶•:</label>
                        <select id="savings-auto">
                            <option value="true">í™œì„±í™”</option>
                            <option value="false">ë¹„í™œì„±í™”</option>
                        </select>
                    </div>
                    <button onclick="updateSavingsSettings()">ë³€ê²½</button>
                    <div id="savings-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì €ì¶• ê³„ì¢Œ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/savings</span>
                        <input type="number" id="savings-account-id" placeholder="íšŒì› ID">
                        <button onclick="getSavingsAccount()">ì¡°íšŒ</button>
                    </div>
                    <div id="savings-account-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê³„ì¢Œ API -->
        <div id="account" class="tab-content">
            <div class="section">
                <h2>ğŸ§ ê³„ì¢Œ API</h2>
                
                <div class="api-group">
                    <h3>ê³„ì¢Œ ëª©ë¡ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/accounts</span>
                        <input type="number" id="accounts-memberId" placeholder="íšŒì› ID">
                        <button onclick="getAccounts()">ì¡°íšŒ</button>
                    </div>
                    <div id="accounts-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ê³„ì¢Œ ë“±ë¡</h3>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span>/api/members/{memberId}/accounts</span>
                    </div>
                    <div class="form-row">
                        <label>íšŒì› ID:</label>
                        <input type="number" id="account-memberId" placeholder="íšŒì› ID">
                    </div>
                    <div class="form-row">
                        <label>ê³„ì¢Œë²ˆí˜¸:</label>
                        <input type="text" id="account-number" placeholder="123-456-789">
                    </div>
                    <div class="form-row">
                        <label>ì€í–‰ëª…:</label>
                        <input type="text" id="account-bankName" placeholder="êµ­ë¯¼ì€í–‰">
                    </div>
                    <div class="form-row">
                        <label>ì£¼ê³„ì¢Œ:</label>
                        <select id="account-isPrimary">
                            <option value="false">ì•„ë‹ˆì˜¤</option>
                            <option value="true">ì˜ˆ</option>
                        </select>
                    </div>
                    <button onclick="registerAccount()">ë“±ë¡</button>
                    <div id="account-register-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ì¹´ë“œ API -->
        <div id="card" class="tab-content">
            <div class="section">
                <h2>ğŸ’³ ì¹´ë“œ API</h2>
                
                <div class="api-group">
                    <h3>ì¹´ë“œ ëª©ë¡ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/cards</span>
                        <input type="number" id="cards-memberId" placeholder="íšŒì› ID">
                        <button onclick="getCards()">ì¡°íšŒ</button>
                    </div>
                    <div id="cards-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ì¹´ë“œ ë“±ë¡</h3>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span>/api/members/{memberId}/cards</span>
                    </div>
                    <div class="form-row">
                        <label>íšŒì› ID:</label>
                        <input type="number" id="card-memberId" placeholder="íšŒì› ID">
                    </div>
                    <div class="form-row">
                        <label>ì¹´ë“œë²ˆí˜¸:</label>
                        <input type="text" id="card-number" placeholder="1234-5678-9012-3456">
                    </div>
                    <div class="form-row">
                        <label>ì¹´ë“œëª…:</label>
                        <input type="text" id="card-name" placeholder="ì‹ í•œì¹´ë“œ Deep Dream">
                    </div>
                    <div class="form-row">
                        <label>ì¹´ë“œì‚¬:</label>
                        <input type="text" id="card-company" placeholder="ì‹ í•œì¹´ë“œ">
                    </div>
                    <div class="form-row">
                        <label>ì¹´ë“œìœ í˜•:</label>
                        <select id="card-type">
                            <option value="CREDIT">ì‹ ìš©ì¹´ë“œ</option>
                            <option value="DEBIT">ì²´í¬ì¹´ë“œ</option>
                            <option value="PREPAID">ì„ ë¶ˆì¹´ë“œ</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>ìœ íš¨ê¸°ê°„:</label>
                        <input type="date" id="card-expiry">
                    </div>
                    <div class="form-row">
                        <label>ë³´ë„ˆìŠ¤(%):</label>
                        <input type="number" id="card-bonus" placeholder="0" step="0.1">
                    </div>
                    <button onclick="registerCard()">ë“±ë¡</button>
                    <div id="card-register-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê±°ë˜ë‚´ì—­ API -->
        <div id="transaction" class="tab-content">
            <div class="section">
                <h2>ğŸ“‹ ê±°ë˜ë‚´ì—­ API</h2>
                
                <div class="api-group">
                    <h3>ìµœê·¼ ê±°ë˜ ë‚´ì—­</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/transactions/recent</span>
                        <input type="number" id="recent-tx-memberId" placeholder="íšŒì› ID">
                        <button onclick="getRecentTransactions()">ì¡°íšŒ</button>
                    </div>
                    <div id="recent-tx-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ê±°ë˜ ë‚´ì—­ ê²€ìƒ‰</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/members/{memberId}/transactions</span>
                    </div>
                    <div class="form-row">
                        <label>íšŒì› ID:</label>
                        <input type="number" id="tx-memberId" placeholder="íšŒì› ID">
                    </div>
                    <div class="form-row">
                        <label>ê±°ë˜ìœ í˜•:</label>
                        <select id="tx-type">
                            <option value="">ì „ì²´</option>
                            <option value="DEPOSIT">ì…ê¸ˆ</option>
                            <option value="WITHDRAWAL">ì¶œê¸ˆ</option>
                            <option value="TRANSFER">ì´ì²´</option>
                            <option value="PAYMENT">ê²°ì œ</option>
                            <option value="SAVINGS">ì €ì¶•</option>
                            <option value="INTEREST">ì´ì</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>ê²€ìƒ‰ì–´:</label>
                        <input type="text" id="tx-keyword" placeholder="ê²€ìƒ‰ì–´">
                    </div>
                    <button onclick="searchTransactions()">ê²€ìƒ‰</button>
                    <div id="tx-response" class="response hidden"></div>
                </div>
            </div>
        </div>

        <!-- ê¸ˆìœµìƒí’ˆ API -->
        <div id="product" class="tab-content">
            <div class="section">
                <h2>ğŸ“Š ê¸ˆìœµìƒí’ˆ API</h2>
                
                <div class="api-group">
                    <h3>ì „ì²´ ìƒí’ˆ ëª©ë¡</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/products</span>
                        <button onclick="getAllProducts()">ì¡°íšŒ</button>
                    </div>
                    <div id="products-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ìœ í˜•ë³„ ìƒí’ˆ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/products/type/{productType}</span>
                        <select id="product-type">
                            <option value="SAVINGS">ì ê¸ˆ</option>
                            <option value="DEPOSIT">ì˜ˆê¸ˆ</option>
                            <option value="FUND">í€ë“œ</option>
                            <option value="INSURANCE">ë³´í—˜</option>
                        </select>
                        <button onclick="getProductsByType()">ì¡°íšŒ</button>
                    </div>
                    <div id="products-type-response" class="response hidden"></div>
                </div>

                <div class="api-group">
                    <h3>ìƒí’ˆ ìƒì„¸ ì¡°íšŒ</h3>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span>/api/products/{productId}</span>
                        <input type="number" id="product-id" placeholder="ìƒí’ˆ ID">
                        <button onclick="getProduct()">ì¡°íšŒ</button>
                    </div>
                    <div id="product-response" class="response hidden"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentMemberId = null;

        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        function showResponse(elementId, data, success = true) {
            const el = document.getElementById(elementId);
            el.classList.remove('hidden');
            el.textContent = JSON.stringify(data, null, 2);
            el.style.borderColor = success ? '#4caf50' : '#f44336';
        }

        async function apiCall(url, method = 'GET', body = null) {
            const options = {
                method,
                headers: { 'Content-Type': 'application/json' }
            };
            if (body) options.body = JSON.stringify(body);
            
            try {
                const response = await fetch(url, options);
                const data = await response.json();
                return { success: response.ok, data };
            } catch (error) {
                return { success: false, data: { error: error.message } };
            }
        }

        // Auth APIs
        async function signup() {
            const body = {
                loginId: document.getElementById('signup-loginId').value,
                password: document.getElementById('signup-password').value,
                name: document.getElementById('signup-name').value,
                birthDate: document.getElementById('signup-birthDate').value,
                phoneNumber: document.getElementById('signup-phoneNumber').value
            };
            const result = await apiCall('/api/auth/signup', 'POST', body);
            showResponse('signup-response', result.data, result.success);
            if (result.success && result.data.data) {
                currentMemberId = result.data.data.id;
                document.getElementById('currentMemberId').textContent = currentMemberId;
            }
        }

        async function login() {
            const body = {
                loginId: document.getElementById('login-loginId').value,
                password: document.getElementById('login-password').value
            };
            const result = await apiCall('/api/auth/login', 'POST', body);
            showResponse('login-response', result.data, result.success);
            if (result.success && result.data.data) {
                currentMemberId = result.data.data.id;
                document.getElementById('currentMemberId').textContent = currentMemberId;
            }
        }

        // Member APIs
        async function getMember() {
            const id = document.getElementById('member-id').value;
            const result = await apiCall(`/api/members/${id}`);
            showResponse('member-response', result.data, result.success);
        }

        async function getHome() {
            const id = document.getElementById('home-id').value;
            const result = await apiCall(`/api/members/${id}/home`);
            showResponse('home-response', result.data, result.success);
        }

        async function getMyPage() {
            const id = document.getElementById('mypage-id').value;
            const result = await apiCall(`/api/members/${id}/mypage`);
            showResponse('mypage-response', result.data, result.success);
        }

        async function updateSavingsSettings() {
            const id = document.getElementById('savings-memberId').value;
            const body = {
                savingsRatio: parseFloat(document.getElementById('savings-ratio').value),
                autoSavingsEnabled: document.getElementById('savings-auto').value === 'true'
            };
            const result = await apiCall(`/api/members/${id}/savings-settings`, 'PUT', body);
            showResponse('savings-response', result.data, result.success);
        }

        async function getSavingsAccount() {
            const id = document.getElementById('savings-account-id').value;
            const result = await apiCall(`/api/members/${id}/savings`);
            showResponse('savings-account-response', result.data, result.success);
        }

        // Account APIs
        async function getAccounts() {
            const id = document.getElementById('accounts-memberId').value;
            const result = await apiCall(`/api/members/${id}/accounts`);
            showResponse('accounts-response', result.data, result.success);
        }

        async function registerAccount() {
            const id = document.getElementById('account-memberId').value;
            const body = {
                accountNumber: document.getElementById('account-number').value,
                bankName: document.getElementById('account-bankName').value,
                isPrimary: document.getElementById('account-isPrimary').value === 'true'
            };
            const result = await apiCall(`/api/members/${id}/accounts`, 'POST', body);
            showResponse('account-register-response', result.data, result.success);
        }

        // Card APIs
        async function getCards() {
            const id = document.getElementById('cards-memberId').value;
            const result = await apiCall(`/api/members/${id}/cards`);
            showResponse('cards-response', result.data, result.success);
        }

        async function registerCard() {
            const id = document.getElementById('card-memberId').value;
            const body = {
                cardNumber: document.getElementById('card-number').value,
                cardName: document.getElementById('card-name').value,
                cardCompany: document.getElementById('card-company').value,
                cardType: document.getElementById('card-type').value,
                expiryDate: document.getElementById('card-expiry').value,
                bonusSavingsRatio: parseFloat(document.getElementById('card-bonus').value) || 0
            };
            const result = await apiCall(`/api/members/${id}/cards`, 'POST', body);
            showResponse('card-register-response', result.data, result.success);
        }

        // Transaction APIs
        async function getRecentTransactions() {
            const id = document.getElementById('recent-tx-memberId').value;
            const result = await apiCall(`/api/members/${id}/transactions/recent`);
            showResponse('recent-tx-response', result.data, result.success);
        }

        async function searchTransactions() {
            const id = document.getElementById('tx-memberId').value;
            const type = document.getElementById('tx-type').value;
            const keyword = document.getElementById('tx-keyword').value;
            let url = `/api/members/${id}/transactions?`;
            if (type) url += `transactionType=${type}&`;
            if (keyword) url += `keyword=${keyword}&`;
            const result = await apiCall(url);
            showResponse('tx-response', result.data, result.success);
        }

        // Product APIs
        async function getAllProducts() {
            const result = await apiCall('/api/products');
            showResponse('products-response', result.data, result.success);
        }

        async function getProductsByType() {
            const type = document.getElementById('product-type').value;
            const result = await apiCall(`/api/products/type/${type}`);
            showResponse('products-type-response', result.data, result.success);
        }

        async function getProduct() {
            const id = document.getElementById('product-id').value;
            const result = await apiCall(`/api/products/${id}`);
            showResponse('product-response', result.data, result.success);
        }
    </script>
</body>
</html>
