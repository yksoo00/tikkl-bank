<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <title>결제 · 시뮬레이션 테스트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="payment.css"/>
  <script defer src="payment.js"></script>
</head>
<body>
<div class="page-shell">
  <header class="page-header">
    <div>
      <h1>결제 / 입출금 테스트</h1>
      <p class="subtitle">저장된 Member ID로 계좌와 카드를 불러와 바로 테스트하세요.</p>
    </div>
    <div class="header-actions">
      <span class="badge" id="currentMember">-</span>
      <button id="reloadData" class="ghost-btn">데이터 새로고침</button>
    </div>
  </header>

  <main class="page-grid">
    <section class="panel">
      <h2>계좌 입출금</h2>
      <div class="panel-grid">
        <form id="form-deposit" class="form-card">
          <h3>입금</h3>
          <label>
            계좌 선택
            <select id="depositAccount"></select>
          </label>
          <label>
            금액
            <input type="number" id="depositAmount" min="1" required/>
          </label>
          <label>
            메모
            <input type="text" id="depositDesc" placeholder="예: 테스트 입금"/>
          </label>
          <button type="submit" class="primary-btn">입금 실행</button>
        </form>

        <form id="form-withdraw" class="form-card">
          <h3>출금</h3>
          <label>
            계좌 선택
            <select id="withdrawAccount"></select>
          </label>
          <label>
            금액
            <input type="number" id="withdrawAmount" min="1" required/>
          </label>
          <label>
            메모
            <input type="text" id="withdrawDesc" placeholder="예: 테스트 출금"/>
          </label>
          <button type="submit" class="danger-btn">출금 실행</button>
        </form>
      </div>
    </section>

    <section class="panel">
      <h2>카드 결제</h2>
      <form id="form-card-payment" class="form-card wide">
        <label>
          카드 선택
          <select id="paymentCard"></select>
        </label>
        <label>
          금액
          <input type="number" id="paymentAmount" min="1" required/>
        </label>
        <label>
          가맹점
          <input type="text" id="paymentMerchant" placeholder="예: 스타벅스" required/>
        </label>
        <label>
          카테고리
          <input type="text" id="paymentCategory" placeholder="CONVENIENCE / CAFE 등"/>
        </label>
        <label>
          메모
          <input type="text" id="paymentDesc" placeholder="선택 입력"/>
        </label>
        <button type="submit" class="primary-btn">카드 결제 실행</button>
      </form>
    </section>

    <section class="panel">
      <h2>마스터카드 관리</h2>
      <div class="panel-grid">
        <form id="form-cardproduct" class="form-card">
          <h3>마스터카드 추가</h3>
          <label>
            카드 이름
            <input type="text" id="cpName" required/>
          </label>
          <label>
            카드사
            <input type="text" id="cpCompany" required/>
          </label>
          <label>
            카드 타입
            <select id="cpType">
              <option value="CREDIT">CREDIT</option>
            </select>
          </label>
          <label>
            연회비
            <input type="number" id="cpAnnualFee" min="0"/>
          </label>
          <label>
            설명
            <textarea id="cpDescription" rows="2" placeholder="간단 설명"></textarea>
          </label>
          <label>
            이미지 URL
            <input type="text" id="cpImageUrl" placeholder="https://"/>
          </label>
          <label>
            혜택 요약
            <textarea id="cpSummary" rows="2"></textarea>
          </label>
          <button type="submit" class="primary-btn">카드 생성</button>
        </form>

        <form id="form-cardbenefit" class="form-card">
          <h3>혜택 추가</h3>
          <label>
            마스터카드 선택
            <select id="benefitCardProduct"></select>
          </label>
          <label>
            혜택 이름
            <input type="text" id="benefitName" required/>
          </label>
          <label>
            혜택 타입
            <select id="benefitType">
              <option value="DISCOUNT">DISCOUNT</option>
              <option value="CASHBACK">CASHBACK</option>
              <option value="POINT">POINT</option>
              <option value="MILEAGE">MILEAGE</option>
            </select>
          </label>
          <label>
            카테고리 코드
            <input type="text" id="benefitCategory" placeholder="CONVENIENCE"/>
          </label>
          <label>
            할인율(예: 0.1 = 10%)
            <input type="number" step="0.01" id="benefitRate"/>
          </label>
          <label>
            월 최대 할인
            <input type="number" id="benefitMax" min="0"/>
          </label>
          <label>
            발동 실적 조건
            <input type="number" id="benefitMinSpend" min="0"/>
          </label>
          <label>
            설명
            <textarea id="benefitDescription" rows="2"></textarea>
          </label>
          <button type="submit" class="primary-btn">혜택 추가</button>
        </form>
      </div>
    </section>

    <section class="panel">
      <h2>시뮬레이션</h2>
      <div class="sim-grid">
        <button id="simulateDay" class="primary-btn">하루 이자 바로 적용</button>
        <button id="simulateMonth" class="primary-btn">월말 결제 바로 적용</button>
      </div>
      <p class="help-text">API: POST /api/dev/simulate/day, POST /api/dev/simulate/month-end</p>
    </section>

    <section class="panel">
      <div class="panel-head">
        <h2>Response Log</h2>
        <button id="clearLog" class="ghost-btn">초기화</button>
      </div>
      <pre id="logArea" class="log-area">// 여기에 API 응답이 표시됩니다.</pre>
    </section>
  </main>
</div>
</body>
</html>
